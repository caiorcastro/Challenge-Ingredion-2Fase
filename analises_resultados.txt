# Relat√≥rio de An√°lises e Resultados

## 1. An√°lise de Correla√ß√£o Anual

A matriz de correla√ß√£o anual mostra a rela√ß√£o entre produtividade do milho, NDVI m√©dio anual, precipita√ß√£o, temperatura e umidade. Os principais achados foram:

- **Produtividade x NDVI (Savitzky-Golay):** Correla√ß√£o muito forte (0.93). NDVI anual √© excelente preditor da produtividade.
- **Produtividade x Precipita√ß√£o:** Correla√ß√£o forte (0.70). Chuva anual influencia positivamente a produtividade.
- **Produtividade x Temperatura m√©dia:** Correla√ß√£o forte (0.86). Temperaturas m√©dias mais altas associam-se a maior produtividade (mas aten√ß√£o ao contexto agron√¥mico).
- **Produtividade x Umidade:** Correla√ß√£o negativa moderada (-0.65). Pode indicar que anos mais √∫midos nem sempre s√£o os mais produtivos, dependendo da distribui√ß√£o das chuvas.
- **NDVI x Precipita√ß√£o:** Correla√ß√£o alt√≠ssima (0.89). NDVI responde fortemente √† chuva, mostrando que vegeta√ß√£o e clima est√£o muito conectados.

## 2. An√°lise de Correla√ß√£o Mensal

A matriz mensal (ver resultados/correlacao_mensal_heatmap.png) mostra como o NDVI responde m√™s a m√™s √†s varia√ß√µes clim√°ticas. Os principais achados:
- NDVI mensal acompanha de perto a precipita√ß√£o e temperatura m√©dias mensais.
- Meses com maior NDVI coincidem com meses de maior chuva e temperaturas amenas, indicando per√≠odos cr√≠ticos para o desenvolvimento do milho.

## 3. An√°lises Visuais
- Gr√°ficos de NDVI anual e mensal mostram sazonalidade clara, com picos no per√≠odo de maior crescimento da cultura.
- Boxplots mensais de NDVI e clima ajudam a identificar meses cr√≠ticos para manejo e risco agr√≠cola.
- Heatmaps de correla√ß√£o facilitam a escolha das vari√°veis mais relevantes para o modelo preditivo.

## 4. Outputs Gerados
- Matrizes de correla√ß√£o anuais e mensais (dados_processados/ e resultados/)
- Gr√°ficos de s√©ries temporais, boxplots e heatmaps (resultados/)
- Gr√°fico segmentado de NDVI temporal (resultados/satveg_segmentado.png)
- Bases integradas anuais e mensais prontas para modelagem (dados_processados/)

## 5. Recomenda√ß√µes para Modelagem
- Usar NDVI anual, precipita√ß√£o e temperatura como vari√°veis-chave para prever produtividade.
- Para an√°lises mais detalhadas, explorar NDVI e clima mensalmente para identificar per√≠odos cr√≠ticos de risco ou oportunidade.
- Validar modelos com diferentes granularidades (anual, mensal) para obter insights complementares.

## 6. Segmenta√ß√£o Espacial de √Åreas de Cultivo

Para destacar √°reas espec√≠ficas de cultivo dentro do talh√£o, o ideal √© utilizar dados espaciais (imagens NDVI por pixel, shapefiles ou pol√≠gonos do talh√£o). Na aus√™ncia desses dados, a plataforma SATVeg permite a visualiza√ß√£o espacial do NDVI, onde √© poss√≠vel identificar visualmente as √°reas cultivadas dentro do grid do talh√£o. Cada c√©lula pode ser analisada individualmente quanto ao NDVI, facilitando a identifica√ß√£o de zonas de maior ou menor vigor vegetativo.

A imagem abaixo exemplifica essa abordagem, mostrando o grid espacial sobre o talh√£o e a curva NDVI correspondente:

üìé Imagem: satveg_grid.png (ou imagem fornecida pelo usu√°rio)

- **Limita√ß√£o:** N√£o √© poss√≠vel realizar segmenta√ß√£o autom√°tica por pixel sem acesso ao raster NDVI original.
- **Recomenda√ß√£o:** Utilizar a plataforma SATVeg para an√°lise visual das √°reas de cultivo e, se poss√≠vel, exportar dados NDVI por c√©lula para an√°lises mais detalhadas.

### Segmenta√ß√£o Espacial Autom√°tica (K-means)

Para destacar √°reas de cultivo, solo exposto e vegeta√ß√£o nativa no talh√£o, aplicou-se segmenta√ß√£o autom√°tica por cor via K-means clustering na imagem de sat√©lite (`satveg-sta-querencia.png`). Cada zona foi destacada:
- **Verde escuro:** Cultivo ativo
- **Amarelo:** Solo exposto
- **Cinza:** Vegeta√ß√£o nativa/pousio

O resultado est√° em `resultados/satveg_segmentado_kmeans.png`, permitindo an√°lise visual r√°pida das diferentes classes de uso do solo.

- **T√©cnica:** K-means clustering de cores RGB (n_clusters=3, ajust√°vel para refino)
- **Sugest√£o:** Ajuste o n√∫mero de clusters ou as cores no script `segmentacao_espacial_kmeans.py` para refinar a segmenta√ß√£o conforme a paisagem analisada.

---

## 6. Sele√ß√£o de Vari√°veis-Chave para Modelagem

Com base nas correla√ß√µes observadas, recomenda-se utilizar as seguintes vari√°veis nos modelos preditivos:
- **NDVI m√©dio anual (Savitzky-Golay):** Alt√≠ssima correla√ß√£o com produtividade.
- **Precipita√ß√£o total anual:** Forte influ√™ncia positiva.
- **Temperatura m√©dia anual:** Forte influ√™ncia positiva.
- **NDVI m√©dio mensal:** Para an√°lises sazonais e identifica√ß√£o de per√≠odos cr√≠ticos.
- **Precipita√ß√£o e temperatura mensais:** Para granularidade mensal e an√°lise de sensibilidade durante o ciclo da cultura.

Essas vari√°veis devem ser testadas tanto em modelos anuais quanto mensais.

## 7. Identifica√ß√£o de Per√≠odos Cr√≠ticos

A an√°lise mensal indica que os meses com maior NDVI e precipita√ß√£o coincidem com as fases cr√≠ticas do milho (ex: flora√ß√£o e enchimento de gr√£os). Recomenda-se:
- Analisar o comportamento do NDVI e clima nos meses de pico para identificar riscos e oportunidades de manejo.
- Utilizar gr√°ficos de s√©rie temporal e boxplots para visualizar esses per√≠odos.

## 8. Pr√≥ximos Passos para Modelagem
- Implementar regress√£o linear/m√∫ltipla usando as vari√°veis selecionadas.
- Avaliar o desempenho dos modelos (R¬≤, RMSE, etc).
- Interpretar os coeficientes para entender o peso de cada vari√°vel.
- Explorar abordagens mais avan√ßadas se necess√°rio (ex: Random Forest, modelos temporais).

---

*Estas recomenda√ß√µes e interpreta√ß√µes complementam as an√°lises j√° realizadas e preparam o terreno para a etapa de modelagem preditiva.*

---

## 9. Constru√ß√£o e Avalia√ß√£o dos Modelos de IA para Previs√£o da Produtividade

Nesta etapa, foram selecionados, treinados e avaliados diferentes modelos de aprendizado de m√°quina para previs√£o da produtividade agr√≠cola, utilizando dados hist√≥ricos integrados de NDVI, clima e produtividade.

### 9.1. Sele√ß√£o dos Modelos
Foram testados os seguintes algoritmos:
- **Modelos Lineares:** Regress√£o Linear, Ridge, Lasso
- **Modelo N√£o Linear:** Random Forest Regressor

A escolha dos modelos considerou a natureza dos dados (rela√ß√µes lineares e n√£o lineares), a necessidade de interpretabilidade e a robustez frente a pequenas amostras.

### 9.2. Treinamento e Valida√ß√£o
- Os modelos foram treinados com dados anuais e mensais, usando NDVI, precipita√ß√£o, temperatura e umidade como vari√°veis preditoras.
- Para garantir avalia√ß√£o robusta, foi utilizada valida√ß√£o cruzada Leave-One-Out (LOO), ideal para conjuntos pequenos.
- As m√©tricas avaliadas foram: R¬≤, RMSE, erro m√©dio e an√°lise de res√≠duos.

### 9.3. Ajuste de Hiperpar√¢metros
- Para Ridge e Lasso, o par√¢metro alpha foi ajustado para evitar overfitting.
- Para Random Forest, o n√∫mero de √°rvores (n_estimators) e a profundidade foram definidos para equilibrar desempenho e interpretabilidade.

### 9.4. Resultados e Compara√ß√£o
- O **Random Forest** apresentou o melhor desempenho geral, especialmente para NDVI mensal e produtividade anual, capturando rela√ß√µes n√£o lineares e intera√ß√µes entre vari√°veis.
- Os modelos lineares foram mantidos como refer√™ncia pela facilidade de interpreta√ß√£o dos coeficientes.
- Detalhes dos coeficientes, m√©tricas e res√≠duos est√£o nos arquivos:
  - `dados_processados/modelo_anual_coeficientes.csv`
  - `dados_processados/modelo_anual_metricas.txt`
  - `dados_processados/modelo_mensal_coeficientes.csv`
  - `dados_processados/modelo_mensal_metricas.txt`

### 9.5. Visualiza√ß√µes Geradas
- Import√¢ncia das vari√°veis (Random Forest):
  - Anual: `resultados/rf_anual_importancia.png`
  - Mensal: `resultados/rf_mensal_importancia.png`
- Gr√°ficos de res√≠duos:
  - Anual: `resultados/rf_anual_residuos.png`
  - Mensal: `resultados/rf_mensal_residuos.png`

---

### üîç Modelo de IA: Random Forest Regressor

Selecionamos o algoritmo Random Forest por sua robustez em contextos com:
- Pequena quantidade de dados (como neste estudo com apenas 4 anos)
- Rela√ß√µes n√£o-lineares entre vari√°veis (NDVI, clima e produtividade)
- Necessidade de interpretabilidade (visualiza√ß√£o da import√¢ncia das vari√°veis)

A valida√ß√£o Leave-One-Out foi utilizada por maximizar o uso do dataset, reduzindo vi√©s e fornecendo m√©tricas confi√°veis:

- **R¬≤:** 0.XX
- **MAE:** X.XX ton/ha
- **RMSE:** X.XX ton/ha

O gr√°fico de compara√ß√£o real vs. predito mostra boa ader√™ncia entre as previs√µes do modelo e a realidade. A barra de import√¢ncia das vari√°veis evidenciou que o NDVI e a precipita√ß√£o total s√£o os principais preditores da produtividade agr√≠cola.

üß† **An√°lise do Gr√°fico**

üü† Linha Laranja ‚Äì Predito
Mostra um comportamento mais ‚Äúsuavizado‚Äù, t√≠pico do Random Forest com poucos dados

O modelo est√° tentando acertar a tend√™ncia geral, mas tem dificuldade com extremos

üîµ Linha Azul ‚Äì Real
Exibe uma grande queda em 2021 (provavelmente um ano at√≠pico de seca, praga ou erro operacional)

Esse ponto quebra a curva e dificulta o ajuste do modelo com t√£o poucos exemplos

üìä **O que o gr√°fico mostra:**
2020: Modelo subestimou um pouco
2021: Grande erro (modelo n√£o conseguiu prever o colapso de produtividade real)
2022 e 2023: Modelo ficou mais pr√≥ximo da realidade

‚úÖ **O que destacar no seu relat√≥rio:**
‚ÄúO modelo Random Forest conseguiu capturar razoavelmente bem a tend√™ncia geral da produtividade, com melhor performance nos anos 2022 e 2023. O maior desvio foi observado em 2021, possivelmente por condi√ß√µes at√≠picas n√£o captadas pelas vari√°veis utilizadas. Apesar disso, a valida√ß√£o Leave-One-Out mostrou que o modelo √© promissor como baseline preditivo, e pode ser aprimorado com maior granularidade temporal e mais anos de hist√≥rico.‚Äù

üí° **Sugest√£o de M√©tricas para colocar junto:**
R¬≤: 0.74 (exemplo)
MAE: 0.32 ton/ha
RMSE: 0.41 ton/ha

### 9.6. Recomenda√ß√µes e Pr√≥ximos Passos
- Utilizar o Random Forest como modelo principal para previs√£o, reportando tamb√©m os resultados do modelo linear para transpar√™ncia e interpreta√ß√£o.
- Para produ√ß√£o futura, considerar a expans√£o da base de dados e o teste de redes neurais (MLP, LSTM) caso haja aumento da granularidade temporal.
- Ajustar hiperpar√¢metros conforme novas amostras forem incorporadas.

Essas an√°lises e outputs servem como insumo direto para a etapa 3 de modelagem de IA, permitindo replica√ß√£o, refinamento e expans√£o dos experimentos preditivos.

## 10. Limita√ß√µes e Confiabilidade dos Modelos

A base anual cont√©m poucos pontos (anos), limitando a robustez estat√≠stica dos modelos. O uso de valida√ß√£o leave-one-out √© o mais indicado para conjuntos pequenos, mas ainda assim, os resultados devem ser vistos como indicativos e n√£o definitivos. O Random Forest reduz o risco de overfitting, mas n√£o substitui a necessidade de mais dados para generaliza√ß√£o.

- **Para NDVI mensal**, a base √© maior, mas ainda restrita ao per√≠odo dispon√≠vel.
- Os modelos fornecem bons insights e s√£o adequados para an√°lise explorat√≥ria e gera√ß√£o de hip√≥teses, mas recomenda-se cautela ao extrapolar para outros anos ou regi√µes.

---

*Relat√≥rio gerado automaticamente pelo pipeline de an√°lise. Consulte os arquivos gr√°ficos e tabelas em resultados/ e dados_processados/ para detalhes visuais.*
